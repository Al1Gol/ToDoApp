(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{27:function(e,t,a){e.exports=a(56)},35:function(e,t,a){},37:function(e,t,a){},56:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),o=a(26),l=a.n(o),c=(a(35),a(6)),s=a(7),u=a(8),i=a(10),h=a(9),m=a(11),d=(a(37),a(5)),p=a.n(d),f=a(0),E=a(4),g=function(e){var t=e.user;return r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("li",null,r.a.createElement(E.b,{to:"/user/".concat(t.id,"/")},t.username)),r.a.createElement("td",null,t.first_name),r.a.createElement("td",null,t.last_name),r.a.createElement("td",null,t.email)))},v=function(e){var t=e.users;return r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("th",null,"Username"),r.a.createElement("th",null,"First_name"),r.a.createElement("th",null,"Last_name"),r.a.createElement("th",null,"Email")),t.map(function(e){return r.a.createElement(g,{user:e})}))},j=function(e){var t=e.project,a=e.users,n=e.deleteProject;return r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,t.name),r.a.createElement("td",null,t.repo),r.a.createElement("td",null,t.workers.map(function(e){return a.find(function(t){return t.id===e}).username}).join(", ")),r.a.createElement("td",null,r.a.createElement("button",{onClick:function(){return n(t.id)}},"Delete"))))},b=function(e){var t=e.projects,a=e.users,n=e.deleteProject;return r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Repository"),r.a.createElement("th",null,"Workers")),t.map(function(e){return r.a.createElement(j,{project:e,users:a,deleteProject:n})}))},k=function(e){var t=e.project,a=e.users;return r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,t.name),r.a.createElement("td",null,t.repo),r.a.createElement("td",null,t.workers.map(function(e){return a.find(function(t){return t.id===e}).username}).join(", "))))},C=function(e){var t=e.projects,a=e.users,n=Object(f.h)().id,o=t.filter(function(e){return e.workers.includes(parseInt(n))});return r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Repository"),r.a.createElement("th",null,"Workers")),o.map(function(e){return r.a.createElement(k,{project:e,users:a})}))},y=function(e){var t=e.user,a=e.project,n=e.todo,o=e.deleteToDo;return r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",{className:n.is_active?"not_complete":"complete"},a.find(function(e){return e.id===n.project}).name),r.a.createElement("td",{className:n.is_active?"not_complete":"complete"},n.text_todo),r.a.createElement("td",{className:n.is_active?"not_complete":"complete"},t.find(function(e){return e.id===n.creator}).username),r.a.createElement("td",{className:n.is_active?"not_complete":"complete"},r.a.createElement("button",{onClick:function(){return o(n.id)}},"Complete"))))},S=function(e){var t=e.users,a=e.project,n=e.todoes,o=e.filter_word,l=e.deleteToDo,c=e.handleChange;return r.a.createElement("div",null,r.a.createElement("input",{type:"text",name:"filter_word",placeholder:"Filtering by project name",value:o,onChange:function(e){return c(e)}}),r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("th",null,"Project"),r.a.createElement("th",null,"Text Todo"),r.a.createElement("th",null,"Creator")),n.map(function(e){return r.a.createElement(y,{user:t,project:a,todo:e,deleteToDo:l})})))},O=function(e){e.header;var t=e.isAuth,a=e.logOut;return r.a.createElement("header",null,r.a.createElement("li",null,r.a.createElement(E.b,{to:"/"},"Projects")),r.a.createElement("li",null,r.a.createElement(E.b,{to:"/users/"},"Users")),r.a.createElement("li",null,r.a.createElement(E.b,{to:"/todo/"},"Todo")),r.a.createElement("li",null,r.a.createElement(E.b,{to:"/todo/create/"},"New todo")),r.a.createElement("li",null,r.a.createElement(E.b,{to:"/projects/create/"},"New project")),r.a.createElement("li",null,t?r.a.createElement("button",{onClick:a},"Logout"):r.a.createElement(E.b,{to:"/login"},"Login")))},w=function(e){e.footer;return r.a.createElement("footer",null,r.a.createElement("p",null," \u0420\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u0430\u043d\u043e \u041a\u043e\u0440\u0435\u043f\u0430\u043d\u043e\u0432\u044b\u043c \u0410\u043b\u044c\u0431\u0435\u0440\u0442\u043e\u043c "))},_=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(h.a)(t).call(this,e))).state={login:[],password:[]},a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"handleSubmit",value:function(e){this.props.obtainAuthToken(this.state.login,this.state.password),e.preventDefault()}},{key:"handleChange",value:function(e){this.setState(Object(c.a)({},e.target.name,e.target.value))}},{key:"render",value:function(){var e=this;return r.a.createElement("form",{onSubmit:function(t){return e.handleSubmit(t)}},r.a.createElement("input",{type:"text",name:"login",placeholder:"login",value:this.state.login,onChange:function(t){return e.handleChange(t)}}),r.a.createElement("input",{type:"password",name:"password",placeholder:"password",value:this.state.password,onChange:function(t){return e.handleChange(t)}}),r.a.createElement("input",{type:"submit",value:"Login"}))}}]),t}(r.a.Component),x=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(h.a)(t).call(this,e))).state={project:[],text_todo:[],creator:[]},a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"handleSubmit",value:function(e){this.props.createTodo(this.state.project,this.state.text_todo,this.state.creator),e.preventDefault()}},{key:"handleChange",value:function(e){this.setState(Object(c.a)({},e.target.name,e.target.value))}},{key:"handleCreatorChange",value:function(e){if(e.target.selectedOptions){for(var t=[],a=0;a<e.target.selectedOptions.length;a++)t.push(parseInt(e.target.selectedOptions.item(a).value));this.setState({creator:t})}}},{key:"handleProjectChange",value:function(e){if(e.target.selectedOptions){for(var t=[],a=0;a<e.target.selectedOptions.length;a++)t.push(parseInt(e.target.selectedOptions.item(a).value));this.setState({project:t})}}},{key:"render",value:function(){var e=this;return r.a.createElement("form",{onSubmit:function(t){return e.handleSubmit(t)}},r.a.createElement("select",{required:!0,onChange:function(t){return e.handleProjectChange(t)}},r.a.createElement("option",{disabled:!0,select:!0,value:""},"--Select project--"),this.props.projects.map(function(e){return r.a.createElement("option",{value:e.id},e.name)})),r.a.createElement("input",{required:!0,type:"text",name:"text_todo",placeholder:"text todo",value:this.state.text_todo,onChange:function(t){return e.handleChange(t)}}),r.a.createElement("select",{required:!0,onChange:function(t){return e.handleCreatorChange(t)}},r.a.createElement("option",{disabled:!0,select:!0,value:""},"--Select creator--"),this.props.users.map(function(e){return r.a.createElement("option",{value:e.id},e.username)})),r.a.createElement("input",{type:"submit",value:"Create"}))}}]),t}(r.a.Component),D=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(h.a)(t).call(this,e))).state={name:"",repo:"",workers:[]},a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"handleSubmit",value:function(e){this.props.createProject(this.state.name,this.state.repo,this.state.workers),e.preventDefault()}},{key:"handleChange",value:function(e){this.setState(Object(c.a)({},e.target.name,e.target.value))}},{key:"handleWorkersChange",value:function(e){if(e.target.selectedOptions){for(var t=[],a=0;a<e.target.selectedOptions.length;a++)t.push(parseInt(e.target.selectedOptions.item(a).value));this.setState({workers:t})}}},{key:"render",value:function(){var e=this;return r.a.createElement("form",{onSubmit:function(t){return e.handleSubmit(t)}},r.a.createElement("input",{type:"text",name:"name",placeholder:"project name",value:this.state.name,onChange:function(t){return e.handleChange(t)}}),r.a.createElement("input",{type:"text",name:"repo",placeholder:"repository",value:this.state.repo,onChange:function(t){return e.handleChange(t)}}),r.a.createElement("select",{multiple:!0,required:!0,size:"3",onChange:function(t){return e.handleWorkersChange(t)}},this.props.users.map(function(e){return r.a.createElement("option",{value:e.id},e.username)})),r.a.createElement("input",{type:"submit",value:"Create"}))}}]),t}(r.a.Component),T=function(){var e=Object(f.f)();return r.a.createElement("div",null,'Page "',e.pathname,'" not found')},P=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(h.a)(t).call(this,e))).state={users:[],projects:[],todoes:[],token:"",filter_word:""},a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"obtainAuthToken",value:function(e,t){var a=this;p.a.post("http://127.0.0.1:8000/api-auth-token/",{username:e,password:t}).then(function(e){var t=e.data.token;localStorage.setItem("token",t),a.setState({token:t},a.getData)}).catch(function(e){return console.log(e)})}},{key:"componentDidMount",value:function(){var e=localStorage.getItem("token");this.setState({token:e},this.getData)}},{key:"logOut",value:function(){localStorage.setItem("token",""),this.setState({token:""},this.getData)}},{key:"isAuth",value:function(){return!!this.state.token}},{key:"handleChange",value:function(e){var t=this;this.setState(Object(c.a)({},e.target.name,e.target.value),function(){t.getData()})}},{key:"getHeadears",value:function(){return this.isAuth?{Authorization:"Token "+this.state.token}:{}}},{key:"getData",value:function(){var e=this,t=this.getHeadears();p.a.get("http://127.0.0.1:8000/api/users/",{headers:t}).then(function(t){var a=t.data.results;e.setState({users:a}),e.state.users=a}).catch(function(t){e.setState({users:[]}),console.log(t)}),p.a.get("http://127.0.0.1:8000/api/projects/",{headers:t}).then(function(t){var a=t.data.results;e.setState({projects:a}),e.state.projects=a}).catch(function(t){e.setState({projects:[]}),console.log(t)}),this.state.filter_word?p.a.get("http://127.0.0.1:8000/api/todo/?name=".concat(this.state.filter_word),{headers:t}).then(function(t){var a=t.data.results;e.setState({todoes:a}),e.state.todoes=a}).catch(function(t){e.setState({todoes:[]}),console.log(t)}):p.a.get("http://127.0.0.1:8000/api/todo/",{headers:t}).then(function(t){var a=t.data.results;e.setState({todoes:a}),e.state.todoes=a}).catch(function(t){e.setState({todoes:[]}),console.log(t)})}},{key:"createTodo",value:function(e,t,a){var n=this,r=this.getHeadears();p.a.post("http://127.0.0.1:8000/api/todo/",{project:e[0],text_todo:t,creator:a[0]},{headers:r}).then(function(e){n.getData()}).catch(function(e){n.setState({todoes:[]}),console.log(e)})}},{key:"createProject",value:function(e,t,a){var n=this,r=this.getHeadears();p.a.post("http://127.0.0.1:8000/api/projects/",{name:e,repo:t,workers:a},{headers:r}).then(function(e){n.getData()}).catch(function(e){n.setState({projects:[]}),console.log(e),console.log(e.response)})}},{key:"deleteToDo",value:function(e){var t=this,a=this.getHeadears();p.a.delete("http://127.0.0.1:8000/api/todo/".concat(e),{headers:a}).then(function(e){e.data.results;t.setState({todoes:t.state.todoes},t.getData)}).catch(function(e){t.setState({todoes:[]}),console.log(e)})}},{key:"deleteProject",value:function(e){var t=this,a=this.getHeadears();p.a.delete("http://127.0.0.1:8000/api/projects/".concat(e),{headers:a}).then(function(a){a.data.results;t.setState({projects:t.state.projects.filter(function(t){return t.id!==e})},t.getData())}).catch(function(e){t.setState({projects:[]}),console.log(e)})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(E.a,null,r.a.createElement(O,{isAuth:this.isAuth(),logOut:function(){return e.logOut()}}),r.a.createElement(f.d,null,r.a.createElement(f.b,{exact:!0,path:"/",element:r.a.createElement(b,{projects:this.state.projects,users:this.state.users,deleteProject:function(t){return e.deleteProject(t)}})}),r.a.createElement(f.b,{exact:!0,path:"/users/",element:r.a.createElement(v,{users:this.state.users})}),r.a.createElement(f.b,{exact:!0,path:"/todo/",element:r.a.createElement(S,{users:this.state.users,project:this.state.projects,todoes:this.state.todoes,filter_word:this.state.filter_word,deleteToDo:function(t){return e.deleteToDo(t)},handleChange:function(t){return e.handleChange(t)}})}),r.a.createElement(f.b,{exact:!0,path:"/todo/create/",element:r.a.createElement(x,{users:this.state.users,projects:this.state.projects,createTodo:function(t,a,n){return e.createTodo(t,a,n)}})}),r.a.createElement(f.b,{exact:!0,path:"/login/",element:r.a.createElement(_,{obtainAuthToken:function(t,a){return e.obtainAuthToken(t,a)}})}),r.a.createElement(f.b,{exact:!0,path:"/projects/",element:r.a.createElement(f.a,{to:"/"})}),r.a.createElement(f.b,{exact:!0,path:"/projects/create/",element:r.a.createElement(D,{users:this.state.users,createProject:function(t,a,n){return e.createProject(t,a,n)}})}),r.a.createElement(f.b,{exact:!0,path:"/user/:id/",element:r.a.createElement(C,{projects:this.state.projects,users:this.state.users})}),r.a.createElement(f.b,{path:"*",element:r.a.createElement(T,null)}))),r.a.createElement(w,null))}}]),t}(r.a.Component),A=function(e){e&&e instanceof Function&&a.e(1).then(a.bind(null,57)).then(function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,o=t.getLCP,l=t.getTTFB;a(e),n(e),r(e),o(e),l(e)})};l.a.createRoot(document.getElementById("root")).render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(P,null))),A()}},[[27,3,2]]]);
//# sourceMappingURL=main.39035ab8.chunk.js.map